# HR-leave-Management-MCP

```markdown
<!-- Banner -->
<p align="center">
  <img src="https://img.shields.io/badge/Model%20Context%20Protocol-MCP%20Server-4B8BF5?style=for-the-badge" />
  <img src="https://img.shields.io/badge/Python-3.11%2B-3776AB?style=for-the-badge&logo=python" />
  <img src="https://img.shields.io/badge/uv-Project%20Manager-000000?style=for-the-badge" />
  <img src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge" />
</p>

<h1 align="center">ğŸ§­ HR Leave Management MCP ğŸ§‘â€ğŸ’¼</h1>

<p align="center">
A lightweight <b>Model Context Protocol (MCP)</b> server that helps HR teams <b>check balances</b>, <b>request/approve leave</b>, and <b>stay holiday-aware</b>.
<br/>
Designed for demos, internal automations, and interview walkthroughs â€” built on <b>FastMCP</b>.
</p>

---

## ğŸŒˆ Table of Contents

- [âœ¨ Highlights](#-highlights)
- [ğŸ—ï¸ Architecture](#ï¸-architecture)
- [ğŸ§© Features (Planned/Example)](#-features-plannedexample)
- [ğŸ”§ Requirements](#-requirements)
- [ğŸš€ Quick Start](#-quick-start)
- [ğŸ§ª Discover & Call (CLI)](#-discover--call-cli)
- [ğŸ§  Data Model](#-data-model)
- [ğŸŒ Holiday Awareness (NagerDate)](#-holiday-awareness-nagerdate)
- [ğŸ“¦ Project Layout](#-project-layout)
- [ğŸ›¡ï¸ Troubleshooting](#ï¸-troubleshooting)
- [ğŸ—ºï¸ Roadmap](#ï¸-roadmap)
- [ğŸ¤ Contributing](#-contributing)
- [ğŸ“œ License](#-license)

---

## âœ¨ Highlights

- **MCP-native**: Tools, resources, and prompts are auto-discovered by MCP clients (e.g., Claude Desktop).
- **Batteries included**: In-memory employee store for fast demos; swap to a real DB/HRIS later.
- **Holiday-aware design**: Easy hook for public holidays via Nager.Date.
- **uv + MCP CLI**: Fast, reproducible setup.
- **Interview-friendly**: Minimal, explainable code with descriptive docstrings.

---

## ğŸ—ï¸ Architecture

```

MCP Client (Claude Desktop / CLI / Any MCP Host)
â”‚  tools() / resources() / prompts()
â–¼
HR Leave Management MCP (FastMCP)
â”œâ”€ Tools: get_leave_balance, request_leave, approve_leave, list_history
â”œâ”€ Resources: latest_request, policy docs
â”œâ”€ Prompts: leave_summary, onboarding summaries
â””â”€ Data: in-memory store (plug DB/HRIS later)

````

---

## ğŸ§© Features (Planned/Example)

- `get_leave_balance(employee_id: str) -> str`
- `request_leave(employee_id: str, date: str, reason?: str) -> str`
- `approve_leave(employee_id: str, date: str) -> str`
- `list_leave_history(employee_id: str) -> str`
- `next_public_holiday(country?: str) -> str` *(Nager.Date)*

> **Decorator rule of thumb:** Always **call** them â€” `@mcp.tool()`, `@mcp.resource()`, `@mcp.prompt()`; start server with `mcp.run()`.

---

## ğŸ”§ Requirements

- **Python 3.11+**
- **uv** (project/env manager)
- **mcp** CLI

Install uv (one-time):
```bash
pipx install uv
# or: pip install uv
````

Install MCP CLI (one-time):

```bash
pipx install mcp
# or: pip install mcp
```

---

## ğŸš€ Quick Start

```bash
# 1) Clone
git clone https://github.com/Akshat-kay/HR-leave-Management-MCP.git
cd HR-leave-Management-MCP

# 2) Create/Sync env & deps
uv sync

# 3) (Optional) Target your currently active venv to avoid warnings
uv run --active python -V

# 4) Install/register the MCP server with your host/registry
uv run --active mcp install main.py
# (Alternative) python -m uv run mcp install main.py

# 5) Develop locally with hot reload
uv run --active mcp dev main.py
```

**Using Claude Desktop?** Add this server in **Settings â†’ Tools (MCP)** and point to the `mcp dev main.py` command (or use the config generated by `mcp install`).

---

## ğŸ§ª Discover & Call (CLI)

List everything the server exposes:

```bash
uv run --active mcp describe main.py
```

Call a tool (after you list the actual names):

```bash
uv run --active mcp call main.py get_leave_balance --json '{"employee_id":"E001"}'
```

Read a resource:

```bash
uv run --active mcp resource main.py latest_request
```

Run a prompt:

```bash
uv run --active mcp prompt main.py leave_summary --json '{"quarter":"Q4-2025"}'
```

---

## ğŸ§  Data Model

Starter in-memory store (example):

```python
employee_leaves = {
  "E001": {"balance": 18, "history": ["2024-12-25", "2025-01-01"]},
  "E002": {"balance": 20, "history": []}
}
```

* **balance**: integer days remaining
* **history**: ISO dates of approved leave

> Swap in SQLite/Postgres + SQLModel/SQLAlchemy when youâ€™re ready.

---

## ğŸŒ Holiday Awareness (NagerDate)

Drop-in sketch to validate public holidays:

```python
import datetime as dt
import json, urllib.request

def is_public_holiday(country="CA", date=None):
    date = date or dt.date.today()
    url = f"https://date.nager.at/api/v3/PublicHolidays/{date.year}/{country}"
    with urllib.request.urlopen(url) as r:
        holidays = json.load(r)
    return any(h["date"] == date.isoformat() for h in holidays)
```

Tips:

* Cache responses (per year/country).
* For offline demos, embed a small holiday map.

---

## ğŸ“¦ Project Layout

```
HR-leave-Management-MCP/
â”œâ”€ main.py           # FastMCP server: tools/resources/prompts
â”œâ”€ pyproject.toml    # uv/PEP 621 metadata
â”œâ”€ uv.lock           # reproducible lockfile
â””â”€ README.md         # this file
```

---

## ğŸ›¡ï¸ Troubleshooting

* **Decorator TypeError** (e.g., â€œuse @resource() instead of @resourceâ€):
  Make sure youâ€™re using **parentheses**: `@mcp.tool()`, `@mcp.resource()`, `@mcp.prompt()`.

* **NameError `___file__`**:
  Use the correct dunder: `__file__` (two underscores), not three.

* **Environment warning**:
  If you see â€œVIRTUAL_ENV does not matchâ€¦â€, add `--active` to your `uv run ...` commands.

* **Windows paths**:
  Prefer `os.path.join` and `os.path.dirname(__file__)` for robust file handling.

---

## ğŸ—ºï¸ Roadmap

* ğŸ” AuthZ (role-based tool access)
* ğŸ—ƒï¸ Database backend (SQLite/Postgres)
* ğŸ§© HRIS adapters (BambooHR/Bob/Workday)
* ğŸ“ˆ Metrics/observability (success rate, p95 latency)
* âœ… Admin prompts (policy checks, pre-approval rules)

---

## ğŸ¤ Contributing

PRs welcome! Keep it:

* **Minimal** (one responsibility per tool)
* **MCP-idiomatic** (JSON-friendly I/O, clear docstrings)
* **Explainable** (great for interviews & handoffs)

---

## ğŸ“œ License

This project is licensed under the **MIT License**. See `LICENSE` for details.

```
